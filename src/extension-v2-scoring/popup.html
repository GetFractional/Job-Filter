<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=320">
  <title>Job Filter Settings</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>Job Filter</h1>
      <p class="subtitle">Capture and score jobs against your preferences</p>
    </header>

    <!-- Tab navigation -->
    <nav class="popup-tabs">
      <button type="button" class="popup-tab active" data-tab="airtable">Airtable</button>
      <button type="button" class="popup-tab" data-tab="profile">Profile</button>
      <button type="button" class="popup-tab" data-tab="flags">Flags</button>
    </nav>

    <!-- Tab: Airtable Settings -->
    <div id="tab-airtable" class="tab-panel active">
      <form id="settings-form">
        <!-- Airtable Base ID input -->
        <div class="form-group">
          <label for="base-id">Airtable Base ID</label>
          <input
            type="text"
            id="base-id"
            placeholder="appXXXXXXXXXXXXXX"
            autocomplete="off"
          >
          <small>Find this in your Airtable base URL after airtable.com/</small>
        </div>

        <!-- Airtable Personal Access Token input -->
        <div class="form-group">
          <label for="api-token">Airtable Personal Access Token</label>
          <input
            type="password"
            id="api-token"
            placeholder="patXXXXXXXXXXXXXX"
            autocomplete="off"
          >
          <small>Create one at airtable.com/create/tokens</small>
        </div>

        <!-- Status message display area -->
        <div id="status-message" class="status-message hidden"></div>

        <!-- Action buttons -->
        <div class="button-group">
          <button type="submit" id="save-btn" class="btn btn-primary">
            Save Settings
          </button>
          <button type="button" id="test-btn" class="btn btn-secondary">
            Test Connection
          </button>
        </div>
      </form>
    </div>

    <!-- Tab: Profile Settings -->
    <div id="tab-profile" class="tab-panel">
      <div class="profile-summary">
        <div class="profile-status" id="profile-status">
          <div class="profile-icon">ðŸ‘¤</div>
          <div class="profile-info">
            <span class="profile-label">Profile Status</span>
            <span class="profile-value" id="profile-status-text">Checking...</span>
          </div>
        </div>

        <!-- Profile summary when configured -->
        <div id="profile-details" class="profile-details hidden">
          <div class="profile-detail-item">
            <span class="detail-label">Salary Range:</span>
            <span class="detail-value" id="profile-salary">--</span>
          </div>
          <div class="profile-detail-item">
            <span class="detail-label">Workplace:</span>
            <span class="detail-value" id="profile-workplace">--</span>
          </div>
          <div class="profile-detail-item">
            <span class="detail-label">Skills:</span>
            <span class="detail-value" id="profile-skills">--</span>
          </div>
          <div class="profile-detail-item">
            <span class="detail-label">Last Updated:</span>
            <span class="detail-value" id="profile-updated">--</span>
          </div>
        </div>

        <!-- Action buttons -->
        <div class="button-group">
          <button type="button" id="setup-profile-btn" class="btn btn-primary">
            Set Up Profile
          </button>
          <button type="button" id="edit-profile-btn" class="btn btn-secondary hidden">
            Edit Profile
          </button>
        </div>

        <p class="profile-hint">
          Set up your job preferences to enable the scoring feature.
          Score jobs instantly to see how well they match your criteria.
        </p>
      </div>
    </div>

    <!-- Tab: Feature Flags -->
    <div id="tab-flags" class="tab-panel">
      <div class="flags-card">
        <h2>Feature Flags</h2>
        <p class="flags-hint">Defaults are off for safety. Enable only what you need.</p>

        <div class="flag-row">
          <label class="switch">
            <input type="checkbox" id="flag-sidepanel">
            <span class="slider"></span>
          </label>
          <div class="flag-text">
            <span class="flag-title">Side Panel (MV3)</span>
            <span class="flag-desc">Enable the new side panel scaffold.</span>
          </div>
        </div>

        <div class="flag-row">
          <label class="switch">
            <input type="checkbox" id="flag-events">
            <span class="slider"></span>
          </label>
          <div class="flag-text">
            <span class="flag-title">Application Events</span>
            <span class="flag-desc">Write events to Application Tracking.</span>
          </div>
        </div>

        <div class="flag-row">
          <label class="switch">
            <input type="checkbox" id="flag-metadata">
            <span class="slider"></span>
          </label>
          <div class="flag-text">
            <span class="flag-title">Job Metadata Fields</span>
            <span class="flag-desc">Populate lane and stale tracking fields.</span>
          </div>
        </div>

        <div id="flags-status" class="status-message hidden"></div>

        <div class="button-group">
          <button type="button" id="flags-save" class="btn btn-primary">
            Save Flags
          </button>
          <button type="button" id="flags-reset" class="btn btn-secondary">
            Reset Defaults
          </button>
        </div>
      </div>
    </div>

    <footer>
      <p>v1.2.0 &bull; <a href="https://github.com/GetFractional/Job-Hunter" target="_blank">Documentation</a></p>
    </footer>
  </div>

  <script src="feature-flags.js"></script>
  <script src="popup.js"></script>
</body>
</html>
