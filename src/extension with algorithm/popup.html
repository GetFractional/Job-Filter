<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Hunter OS</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Job Hunter OS</h1>
            <p class="subtitle">Automated job applications</p>
        </header>

        <!-- Tabs -->
        <div style="display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 1px solid #e9ecef; padding-bottom: 10px;">
            <button class="tab-link active" onclick="switchPopupTab('settings')">Settings</button>
            <button class="tab-link" onclick="switchPopupTab('profile')">Profile</button>
            <button class="tab-link" onclick="switchPopupTab('help')">Help</button>
        </div>

        <!-- Settings Tab -->
        <div id="settings" class="tab-content active">
            <form id="settings-form">
                <div class="form-group">
                    <label for="base-id">Airtable Base ID</label>
                    <input type="text" id="base-id" placeholder="appXXXXXXXXXXXXXX" required>
                    <small>Find in your Airtable base URL</small>
                </div>

                <div class="form-group">
                    <label for="api-token">Personal Access Token</label>
                    <input type="password" id="api-token" placeholder="patXXXXXXXXXXXXXX" required>
                    <small>Create at <a href="https://airtable.com/create/tokens" target="_blank">airtable.com/create/tokens</a></small>
                </div>

                <div id="status-message" class="status-message hidden"></div>

                <div class="button-group">
                    <button type="submit" id="save-btn" class="btn btn-primary">Save Settings</button>
                    <button type="button" id="test-btn" class="btn btn-secondary">Test Connection</button>
                </div>
            </form>
        </div>

        <!-- Profile Tab -->
        <div id="profile" class="tab-content">
            <div style="margin-bottom: 20px;">
                <p style="font-size: 12px; color: #6c757d; margin: 0 0 16px 0;">
                    Configure your job preferences, skills, and deal-breakers. This helps the scoring algorithm evaluate job fit.
                </p>
                <button class="btn btn-primary" onclick="openProfileSetup()" style="width: 100%;">
                    Open Profile Setup
                </button>
            </div>

            <div id="profile-summary" style="background-color: #f8f9fa; padding: 12px; border-radius: 6px; font-size: 12px; color: #6c757d;">
                <p style="margin: 0 0 8px 0;">
                    <strong>Your Profile Status:</strong>
                </p>
                <p id="profile-status-text" style="margin: 0;">
                    Loading...
                </p>
            </div>
        </div>

        <!-- Help Tab -->
        <div id="help" class="tab-content">
            <div style="font-size: 12px; color: #495057; line-height: 1.6;">
                <h3 style="margin-top: 0;">How to Use Job Hunter OS</h3>
                
                <h4>1. Configure Airtable</h4>
                <p>Enter your Airtable Base ID and Personal Access Token in the Settings tab. <a href="https://support.airtable.com/hc/en-us/articles/8916057753167" target="_blank">Learn more</a></p>

                <h4>2. Set Up Your Profile</h4>
                <p>Click "Open Profile Setup" to configure your job preferences, skills, and deal-breakers.</p>

                <h4>3. Score Jobs</h4>
                <p>On any LinkedIn or Indeed job page, click the yellow "âš¡ Score This Job" button to instantly see if it's a fit.</p>

                <h4>4. Send to Airtable</h4>
                <p>Click the blue "ðŸ“¤ Send to Job Hunter" button to capture the job to your Airtable pipeline.</p>

                <hr style="border: none; border-top: 1px solid #e9ecef; margin: 16px 0;">

                <h4>How Scoring Works</h4>
                <p>The algorithm evaluates two dimensions:</p>
                <ul style="margin: 8px 0; padding-left: 20px;">
                    <li><strong>Job â†’ You (0â€“50):</strong> Does the job meet your salary, remote, and equity requirements?</li>
                    <li><strong>You â†’ Job (0â€“50):</strong> Do your skills and background match the role?</li>
                </ul>
                <p><strong>Scores:</strong> 76â€“100 = Strong Fit | 56â€“75 = Good Fit | 36â€“55 = Consider | 0â€“35 = Skip</p>
            </div>
        </div>

        <footer>
            <p>Version 1.0 | <a href="https://github.com" target="_blank">GitHub</a></p>
        </footer>
    </div>

    <style>
        .tab-link {
            background: none;
            border: none;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 13px;
            color: #6c757d;
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
        }

        .tab-link.active {
            color: #4361ee;
            border-bottom-color: #4361ee;
            font-weight: 500;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .status-message.hidden {
            display: none;
        }
    </style>

    <script src="popup.js"></script>
</body>
</html>